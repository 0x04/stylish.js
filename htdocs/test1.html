<!DOCTYPE html>
<html>
<head>
    <title></title>

    <link rel="stylesheet"
          type="text/css"
          href="test1.css"
          sty_lish
    />
    <style type="text/css" stylish>

        .stylish-button
        {
            content: 'stylish({ "data": { "hello": "world" } })';
        }

        .stylish-button[data-hello="world"]
        {
            background-color: green;
        }

        body
        {
            background-color: aquamarine;
            /* ... */
            content: 'stylish("hello world. sq")';
        }

        .test[stylish='{"abc":123}']
        {

        }

        /**
         * Test of the "on" Expression handler
         * @see {Stylish.triggers.on}
         */
        .test-on-expression-global
        {
            content: 'stylish({ "on": { "events": [ "click" ], "mode": "global" }})'
        }

        /**
         * Test of the "on" Expression handler
         * @see {Stylish.triggers.on}
         */
        .test-on-expression-local
        {
            content: 'stylish({ "on": { "events": [ "click" ], "mode": "local" }})'
        }

    </style>

    <script type="text/javascript" src="../src/stylish.js"></script>
</head>
<body>

<div style="content: 'stylish(\'inline element\')'" stylish>inline 1</div>
<div style="content: 'stylish({ \'data\': { \'test\': \'inline\' } })'" stylish>inline 2</div>

<button class="stylish-button">test</button>
<fieldset>
    <button class="test-on-expression-global">on expression global 1</button>
    <button class="test-on-expression-global">on expression global 2</button>
</fieldset>
<fieldset>
    <button class="test-on-expression-local">on expression local 1</button>
    <button class="test-on-expression-local">on expression local 2</button>
</fieldset>
<script type="text/javascript" src="test1.js"></script>

<script type="text/javascript">

    console.time('init');
    var stylish = new Stylish();

    function triggerCustom(nodes, args, styleProvider)
    {
        console.log('[triggerCustom]', nodes, args, styleProvider);
    }

    stylish
        .addTrigger(Stylish.triggers.on)
        .addTrigger(Stylish.triggers.data)
        .addTrigger(triggerCustom)
        .addHandler(Stylish.triggers.on, function(nodes, payload, trigger)
        {
            console.info('[onHandler]', nodes, payload);
        })
        .addHandler(Stylish.triggers.data, function(nodes, payload, trigger)
        {
            console.info('[dataHandler]', nodes, payload);
        });

    stylish.process();

    console.timeEnd('init');

</script>

</body>
</html>